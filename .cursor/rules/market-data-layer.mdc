---
alwaysApply: true
---

# Market Data Aggregator

## Purpose
Convert raw event streams into periodic market snapshots.

## Inputs
Events from nad.fun streams:
- swaps
- buys
- sells

## Aggregated Metrics
Per token:
- last price
- volume in window
- number of events
- approximate unique traders
- price tail
- short returns
- volatility estimate

## Output
Every tick (e.g. 60s), emit:

MarketSnapshot {
  token,
  price,
  returns,
  volatility,
  activity metrics
}

Snapshots are used by agents.
